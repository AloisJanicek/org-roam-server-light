#+TITLE: Readme

* org-roam-server-light
This project is NOT part of official [[https://www.orgroam.com/][Org-roam]] project.
This project started as personal experiment, proof-of-concept and doesn't aspire to become something more then that.
It however uses "org-roam(-server)" name but does it out of good intentions:
1. to make this little experiment easier to find
2. to make the purpose of this project clear

=org-roam-server-light= attempts to move [[https://github.com/org-roam/org-roam-server][org-roam-server]] functionality from emacs into external python server process due to subjective poor elisp / emacs performance when computing graph data for larger amount of org-roam files and serving them to web browser.

** Credits
Client side code, assets and some elisp copied as they are from [[https://github.com/org-roam/org-roam-server][org-roam-server]]
python code copied and expanded from [[https://github.com/aklatzke/python-webserver-part-2][aklatzke/python-webserver-part-2]]

** Prerequisites
File-preview functionality requires [[https://pandoc.org/][pandoc]] being available in your PATH

** Installation
#+BEGIN_EXAMPLE
git clone https://github.com/AloisJanicek/org-roam-server-light.git
#+END_EXAMPLE

Add following elisp code into your emacs config and ensure that =org-roam-server-light-dir= points to valid directory

** Elisp code
if you are using doom emacs
#+BEGIN_SRC emacs-lisp
;; .doom.d/config.el

(after! org-roam
  ;; optionally customize vis.Network options
  (setq org-roam-server-light-network-vis-options
        "{ \"edges\": { \"arrows\": { \"to\": { \"enabled\": true,\"scaleFactor\": 1.5 } } } }"
        )

  ;; set the directory where you cloned this repository
  (setq org-roam-server-light-dir "~/org-roam-server-light")

  ;; finally load the main elisp file
  (load! (expand-file-name "org-roam-server-light.el" org-roam-server-light-dir))
  )
#+END_SRC

or if you are using other emacs
#+BEGIN_SRC emacs-lisp
;; .emacs.d/init.el

(eval-after-load 'org-roam
  ;; optionally customize vis.Network options
  (setq org-roam-server-light-network-vis-options
        "{ \"edges\": { \"arrows\": { \"to\": { \"enabled\": true,\"scaleFactor\": 1.5 } } } }"
        )

  ;; set the directory where you cloned this repository
  (setq org-roam-server-light-dir "~/org-roam-server-light")

  ;; finally load the main elisp file
  (load (expand-file-name "org-roam-server-light.el" org-roam-server-light-dir))
  )
#+END_SRC
** Usage
Running =org-roam-server-light-mode= will start org-roam-server-light server on http://localhost:8080

** Roadmap and functionality overview
*** COMPLETED +Serve all kinds of static assets+
*** COMPLETED +Keep track of current buffer+
*** COMPLETED +Start and stop external python server process when you enable or disable org-roam-server-light-mode in emacs+
*** COMPLETED +Actually construct required JSON for vis-network in Python+
*** COMPLETED +Handle file previews+
*** COMPLETED +Fix href stuff for links in file preview+
*** COMPLETED +Handle /org-roam-buffer+
*** COMPLETED +Move elisp code into its own file+
*** COMPLETED Support custom visualization config
*** TODO Improve appearance of roam-buffer and file-preview panes
- add CREATED timestamp
- add total count of backlinks
*** TODO Allow to customize server URL
*** TODO Implement items filtering [0/2]
- [ ] elisp variables
        export them on startup into file
- [ ] servelet =default-filters application/json=
        read the file with JSON data and serve it

*** TODO Handle citelinks in roam-buffer pane
*** TODO Properly review multi-platform file paths handling in python files
*** TODO Consider some better solution for informatino exchange between emacs and python server
with main objective of it being as much light on resources usage as possible

currently this projects uses plain-text files for information exchange between emacs and python server
